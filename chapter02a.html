<!DOCTYPE html>
<html>
<head>
	<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
	<title>BSF - Chapter 02A</title>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <script type="text/javascript" charset="utf-8" src="edge_includes/edge.5.0.1.min.js"></script>
	
	<!--
    <script type="text/javascript" charset="utf-8" src="ch01_02_edge.js"></script>
	<script type="text/javascript" charset="utf-8" src="ch01_08_edge.js"></script>
	<script type="text/javascript" charset="utf-8" src="ch01_09_edge.js"></script>
	-->
	
	<!--
    <script type="text/javascript" charset="utf-8" src="page_b_edgePreload.js"></script>
    <script type="text/javascript" charset="utf-8" src="page_c_edgePreload.js"></script>
	-->
    <style>
	<!-- loading od all the Adobe edge Projects.  PAGE_A is the Composition Class set in the Adobe Edge Animate Software -->
        .edgeLoad-CH02A_02 { visibility:hidden;}
        .edgeLoad-CH02A_06 { visibility:hidden;}
        .edgeLoad-CH02A_08 { visibility:hidden;}
        .edgeLoad-CH02A_09 { visibility:hidden;}
		.edgeLoad-CH02A_11 { visibility:hidden;}
        .edgeLoad-CH02A_13 { visibility:hidden;}
        .edgeLoad-CH02A_15 { visibility:hidden;}		
        .edgeLoad-CH02A_18 { visibility:hidden;}	
		.edgeLoad-CH02A_26 { visibility:hidden;}	
		.edgeLoad-CH02A_30 { visibility:hidden;}		
        .edgeLoad-CH02A_39 { visibility:hidden;}
		
		#StageA, #StageB, #StageC, #StageD, #StageE, #StageF, #StageG, #StageH, #StageI, #StageJ, #StageK {
			position:absolute;
			<!-- left:10px;
			top:10px; -->
		}
		
		
		#StageB, #StageC, #StageD, #StageE, #StageF, #StageG, #StageH, #StageI, #StageJ, #StageK {
			display:none;
		}
		
		body {
			background-color: black;
			}
    </style>
	<!-- Adobe Edge project setting - set in Edge Animate -->
	<script>
	   AdobeEdge.loadComposition('ch02a_02', 'CH02A_02', {
		scaleToFit: "both",
		centerStage: "both",
		minW: "0",
		maxW: "1280px",
		width: "1280px",
		height: "800px"
	}, {"style":{"${symbolSelector}":{"isStage":"true","rect":["undefined","undefined","1280px","800px"],"fill":["rgba(255,255,255,1)"]}},"dom":[{"rect":["596","356","88px","88px","auto","auto"],"id":"preloader5","fill":["rgba(0,0,0,0)","images/preloader5.gif","0px","0px"],"type":"image","tag":"img"},{"rect":["408px","245px","auto","auto","auto","auto"],"font":["Arial, Helvetica, sans-serif",[24,"px"],"rgba(255,255,255,1.00)","400","none solid rgb(0, 0, 0)","normal","break-word","nowrap"],"id":"Text2","text":"Loading<br>The Parts &amp; Functions of the Biosand Filter","align":"center","type":"text"}]}, {"dom":{}});
	</script>
	<script>
	   AdobeEdge.loadComposition('ch02a_06', 'CH02A_06', {
		scaleToFit: "both",
		centerStage: "both",
		minW: "0",
		maxW: "1280px",
		width: "1280px",
		height: "800px"
	}, {"dom":{}}, {"dom":{}});
	</script>
	<script>
	   AdobeEdge.loadComposition('ch02a_08', 'CH02A_08', {
		scaleToFit: "both",
		centerStage: "both",
		minW: "0",
		maxW: "1280px",
		width: "1280px",
		height: "800px"
	}, {"dom":{}}, {"dom":{}});
	</script>
	<script>
	   AdobeEdge.loadComposition('ch02a_09', 'CH02A_09', {
		scaleToFit: "both",
		centerStage: "both",
		minW: "0px",
		maxW: "1280px",
		width: "1280px",
		height: "800px"
	}, {"dom":{}}, {"dom":{}});
	</script>
	<script>
	   AdobeEdge.loadComposition('ch02a_11', 'CH02A_11', {
		scaleToFit: "both",
		centerStage: "both",
		minW: "0",
		maxW: "1280px",
		width: "1280px",
		height: "800px"
	}, {"dom":{}}, {"dom":{}});
	</script>
	<script>
	   AdobeEdge.loadComposition('ch02a_13', 'CH02A_13', {
		scaleToFit: "both",
		centerStage: "both",
		minW: "0",
		maxW: "1280px",
		width: "1280px",
		height: "800px"
	}, {"dom":{}}, {"dom":{}});
	</script>
	<script>
	   AdobeEdge.loadComposition('ch02a_15', 'CH02A_15', {
		scaleToFit: "both",
		centerStage: "both",
		minW: "0",
		maxW: "1280px",
		width: "1280px",
		height: "800px"
	}, {"dom":{}}, {"dom":{}});
	</script>
	<script>
	   AdobeEdge.loadComposition('ch02a_18', 'CH02A_18', {
		scaleToFit: "both",
		centerStage: "both",
		minW: "0",
		maxW: "1280px",
		width: "1280px",
		height: "800px"
	}, {"dom":{}}, {"dom":{}});
	</script>
	<script>
	   AdobeEdge.loadComposition('ch02a_26', 'CH02A_26', {
		scaleToFit: "both",
		centerStage: "both",
		minW: "0",
		maxW: "1280px",
		width: "1280px",
		height: "800px"
	}, {"dom":{}}, {"dom":{}});
	</script>
	<script>
	   AdobeEdge.loadComposition('ch02a_30', 'CH02A_30', {
		scaleToFit: "both",
		centerStage: "both",
		minW: "0",
		maxW: "1280px",
		width: "1280px",
		height: "800px"
	}, {"dom":{}}, {"dom":{}});
	</script>
	<script>
	   AdobeEdge.loadComposition('ch02a_39', 'CH02A_39', {
		scaleToFit: "both",
		centerStage: "both",
		minW: "0",
		maxW: "1280px",
		width: "1280px",
		height: "800px"
	}, {"dom":{}}, {"dom":{}});
	</script>
    
	<script>
		var wrapperCurrentPage = "CH02A_02";
        console.log("setting initial page:" + wrapperCurrentPage);
		//var loadedComps = {};
        var loadedComps = [];
        var wrappers = ["CH2A_02", "CH2A_06", "CH2A_08", "CH2A_09", "CH2A_11", "CH2A_13", "CH2A_15", "CH2A_18", "CH2A_26", "CH2A_30", "CH2A_39"];
        console.log(wrappers);
        var stages = ["#StageA", "#StageB", "#StageC", "#StageD", "#StageE", "#StageF", "#StageG", "#StageH", "#StageI", "#StageJ", "#StageK",];
        console.log(stages);
        var sceneSeq = 0;
        
        // pause functionality
        function vc_stop() {
            loadedComps[wrapperCurrentPage].getStage().stopAll();
            audioPause();
        }
        
        function audioPause() {
            var aFile = AdobeEdge.getComposition(wrapperCurrentPage);
            // need to create an audio file for each scene that's named the same as the inique adobe Edge id the use this commented out line - works in testing
            //aFile.getStage().$(wrapperCurrentPage)[0].pause();
            console.log("sound should be paused");
        }
        
        // play functionality
        function vc_play() {
            loadedComps[wrapperCurrentPage].getStage().playAll();
            audioPlay();
        }
        
        function audioPlay() {
            var aFile = AdobeEdge.getComposition(wrapperCurrentPage);
            // need to create an audio file for each scene that's named the same as the inique adobe Edge id the use this commented out line - works in testing
            //aFile.getStage().$(wrapperCurrentPage)[0].play();
            console.log("sound should be play from pause point");
        }
        
        // sort through stages and turn off previous scene and on new scene
        // direction arguement is either 1 or -1
        function stageSort(direction) {
            // pretty sure we can remove seqTest variable - test this version first to make sure it works
            console.log("stage sort - sceneSeq = " + sceneSeq + " direction = " + direction);
            var seqTest = sceneSeq
            seqTest += direction;
            if (seqTest < 0) {
                console.log("can't move back - its the beginning");
   
            }
            else if (seqTest == stages.length) {
                console.log("can't move forward - its the end");        
            }
            else {
                console.log("current Scene Seq = " + sceneSeq);
                console.log("moving scene seq " + direction);
                console.log("new Scene Seq = " + seqTest);
                var aFile = AdobeEdge.getComposition(wrapperCurrentPage);
                aFile.$(stages[sceneSeq]).hide();
                vc_stop();
                wrapperCurrentPage = wrappers[seqTest];
                console.log("wrapperCurrentPage = " + wrapperCurrentPage);
                // not working here as nothing is being loaded
                //loadedComps[wrapperCurrentPage] = AdobeEdge.getComposition(wrapperCurrentPage);
                //aFile.$(stages[seqTest]).show();
                // vc_play();
                sceneSeq = seqTest;
            }               
        }
            
        function vc_back() {
            stageSort(-1);
            //alert("back functionality may be coming soon");
        }
        
        function vc_forward() {
            stageSort(1);
            //alert("foward functionality may be coming soon");
        }    
        
		//alert("variables set for bootstrap callback function");
		AdobeEdge.bootstrapCallback(function(compId) {

			loadedComps[compId] = AdobeEdge.getComposition(compId);
			//alert("initiating AdobeEdge.bootstapCallback function " + compId);

			// now it is safe to call into the and bind to things like...
			AdobeEdge.Symbol.bindTimelineAction(compId, "stage", "Default Timeline", "complete", function(sym, e) {	
					//alert("Timeline " + wrapperCurrentPage + " Complete: " + compId);
					
				//loop
                // update to remove the long if/else statement and use arrays to turn comps on and off
				if(compId == wrapperCurrentPage) {
					//alert("compID == wrapperCurrentPage");
					if (compId == "CH02A_02") {
						wrapperCurrentPage = "CH02A_06";
                        sceneSeq += 1;
                        console.log("sceneSeq = " + sceneSeq);
						sym.$("#StageA").hide();
						sym.$("#StageB").show();
						//alert("trigger1");
						loadedComps[wrapperCurrentPage].getStage().playAll(0);
					}
					else if (compId == "CH02A_06") {
						wrapperCurrentPage = "CH02A_08";
                        sceneSeq += 1;
                        console.log("sceneSeq = " + sceneSeq);
						sym.$("#StageB").hide();
						sym.$("#StageC").show();						
						//alert("trigger2");
						loadedComps[wrapperCurrentPage].getStage().playAll(0);
					}
					else if (compId == "CH02A_08") {
						wrapperCurrentPage = "CH02A_09";
                        sceneSeq += 1;
                        console.log("sceneSeq = " + sceneSeq);
						sym.$("#StageC").hide();
						sym.$("#StageD").show();						
						//alert("trigger3");
						loadedComps[wrapperCurrentPage].getStage().playAll(0);
					}
					else if (compId == "CH02A_09") {
						wrapperCurrentPage = "CH02A_11";
                        sceneSeq += 1;
                        console.log("sceneSeq = " + sceneSeq);
						sym.$("#StageD").hide();
						sym.$("#StageE").show();						
						//alert("trigger4");
						loadedComps[wrapperCurrentPage].getStage().playAll(0);
					}
					else if (compId == "CH02A_11") {
						wrapperCurrentPage = "CH02A_13";
                        sceneSeq += 1;
                        console.log("sceneSeq = " + sceneSeq);
						sym.$("#StageE").hide();
						sym.$("#StageF").show();						
						//alert("trigger5");
						loadedComps[wrapperCurrentPage].getStage().playAll(0);
					}
					else if (compId == "CH02A_13") {
						wrapperCurrentPage = "CH02A_15";
                        sceneSeq += 1;
                        console.log("sceneSeq = " + sceneSeq);
						sym.$("#StageF").hide();
						sym.$("#StageG").show();						
						//alert("trigger6");
						loadedComps[wrapperCurrentPage].getStage().playAll(0);
					}
					else if (compId == "CH02A_15") {
						wrapperCurrentPage = "CH02A_18";
                        sceneSeq += 1;
                        console.log("sceneSeq = " + sceneSeq);
						sym.$("#StageG").hide();
						sym.$("#StageH").show();						
						//alert("trigger2");
						loadedComps[wrapperCurrentPage].getStage().playAll(0);
					}
					else if (compId == "CH02A_18") {
						wrapperCurrentPage = "CH02A_26";
                        sceneSeq += 1;
                        console.log("sceneSeq = " + sceneSeq);
						sym.$("#StageH").hide();
						sym.$("#StageI").show();						
						//alert("trigger3");
						loadedComps[wrapperCurrentPage].getStage().playAll(0);
					}
					else if (compId == "CH02A_26") {
						wrapperCurrentPage = "CH02A_30";
                        sceneSeq += 1;
                        console.log("sceneSeq = " + sceneSeq);
						sym.$("#StageI").hide();
						sym.$("#StageJ").show();						
						//alert("trigger4");
						loadedComps[wrapperCurrentPage].getStage().playAll(0);
					}
					else if (compId == "CH02A_30") {
						wrapperCurrentPage = "CH02A_39";
                        sceneSeq += 1;
                        console.log("sceneSeq = " + sceneSeq);
						sym.$("#StageJ").hide();
						sym.$("#StageK").show();						
						//alert("trigger5");
						loadedComps[wrapperCurrentPage].getStage().playAll(0);
					}					
					else {
						//wrapperCurrentPage = "CH06_02";
						//sym.$("#StageM").hide();
						//sym.$("#StageA").show();						
						//alert("trigger7");

					}
	
				}

		    });
			
		});
	</script>

	
</head>
<body style="margin:0;padding:0;">
    <button onclick="vc_back();">Back</button>
    <button onclick="vc_stop();">Stop</button>
	<button onclick="vc_play();">Play</button>  
    <button onclick="vc_forward();">Forward</button>

	<div id="StageA" class="CH02A_02">
	</div>
	<div id="StageB" class="CH02A_06">
	</div>
	<div id="StageC" class="CH02A_08">
	</div>
	<div id="StageD" class="CH02A_09">
	</div>
	<div id="StageE" class="CH02A_11">
	</div>
	<div id="StageF" class="CH02A_13">
	</div>
	<div id="StageG" class="CH02A_15">
	</div>
	<div id="StageH" class="CH02A_18">
	</div>		
	<div id="StageI" class="CH02A_26">
	</div>
	<div id="StageJ" class="CH02A_30">
	</div>
	<div id="StageK" class="CH02A_39">
	</div>
</body>
</html>